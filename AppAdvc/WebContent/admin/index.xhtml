<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	  xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">
<h:head>
	
	<f:metadata>
	
			<f:event type="preRenderView" 
		listener="#{logincontroller.isAdmin}"/> 
		
		
		  	<f:event type="preRenderView" 
		listener="#{logincontroller.isLogin}"/> 
		
		
		
		<f:event type="preRenderView" listener="#{admincontroller.loadAccounts}"/> 
		<f:event type="preRenderView" listener="#{projController.loadaccountsinfo}"/> 
		
	</f:metadata>
	
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1"/>
	
	
	<h:outputStylesheet library="css_cos" name="style.css"/>
	<h:outputStylesheet library="bootstrap" name="bootstrap.css"/>

			 	<link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css"/>
			    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/responsive/2.2.1/css/responsive.dataTables.min.css"/>
			 
			    <script type="text/javascript" language="javascript" src="https://code.jquery.com/jquery-1.12.4.js"></script>
			    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
			    <script type="text/javascript" language="javascript" src="https://cdn.datatables.net/responsive/2.2.1/js/dataTables.responsive.min.js"></script>
			 
			    <script type="text/javascript" class="init">
			     $(document).ready(function() {
			        $('#example').DataTable( {
			            responsive: {
			                details: {
			                    type: 'column', 
			                    target: 'tr'
			                }
			            },
			            columnDefs: [ {
			                className: 'control',
			                orderable: false,
			                targets:   0
			            } ],
			            order: [ 1, 'asc' ]
			        } );
			    } );
			 
			    </script>
			    

	<title>JCH | Admin</title>
</h:head>
<h:body>
	<ui:include src="/templates/admin_navbar.xhtml" />
     
     <div class="container">
     	<br/><br/>
		<div class="col-md-3 log">
			  <h4>List  All Admins  Account: #{projController.accountsinfo[0]} </h4>	
			 <h6> 	Joiners Active   Account: #{projController.accountsinfo[5]} </h6>		<br/>	
		</div>
		<div class="col-md-3 log">
			 <h4>List  All Schools  Account:	#{projController.accountsinfo[1]}</h4>		
			  <h6> 	Schools Active   Account: #{projController.accountsinfo[4]} </h6>	<br/>	
		</div>
		<div class="col-md-3 log">
			 <h4>List  All  Joiners Account:	#{projController.accountsinfo[2]}</h4>	
			  <h6> 	Admins Active   Account: #{projController.accountsinfo[3]} </h6>	<br/>
		</div>
		<div class="col-md-3 log">
		<br/><br/>
			<h:button value="ADD ACCOUNT" class="btn btn-info pull-center" outcome="adminregister" />
		</div>
		
		<hr/>	
		<br/><br/>
        <h2>All Accounts</h2>
        <hr/>
        
	<h:dataTable value="#{admincontroller.accounts}" var="tempaccount" id="example" class="display nowrap" style="width:100%">    
		
		<h:column>
		
		</h:column>
		
		<h:column>
			<f:facet name="header"> Admin/School Name </f:facet>
				
			<!-- Display actual value of the column -->
			#{tempaccount.firstname} #{tempaccount.middlename} #{tempaccount.lastname}
	
			#{tempaccount.schoolname}
		</h:column>
		
		<h:column>
			<f:facet name="header">User Type</f:facet>
			#{tempaccount.userType}
		</h:column>
		
		
		<h:column>
			<f:facet name="header">	Email</f:facet>
			
			#{tempaccount.email}
		</h:column>
		
		<h:column>
			<f:facet name="header">Creation Date</f:facet>
						
			#{tempaccount.creationDate}
				
			<h:outputText id="date"/>
		</h:column>
		
		
		<h:column>
			<f:facet name="header">Modified Date</f:facet>
		
			#{tempaccount.modifiedDate}
		</h:column>
		
		
		<h:column>
			<f:facet name="header">AccountStatus</f:facet>
			
			#{tempaccount.accountStatus}
		</h:column>
		

		<h:column>
			<!-- column header -->
			<f:facet name="header">Action</f:facet>

			 <h:form>		
			 
					<h:commandLink value="Update" action ="#{admincontroller.loadAccount(tempaccount.accountID)}" class="btn btn-default"/>
					
					<div class="form-group">
						<div class="col-md-3">
				        	<h:commandLink value="Delete" 
							onclick="if (!confirm('Are you sure you want to delete this account?')) return false"
							action ="#{admincontroller.deleteAccount(tempaccount.accountID)}" />	
						</div>
					</div>

			</h:form>
		</h:column>
		
	</h:dataTable>


</div>
		<ui:include src="/templates/footer.xhtml" />
		
	
		
		
</h:body>

</html>


